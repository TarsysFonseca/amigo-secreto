<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Amigo Secreto da Fam√≠lia</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #fafafa;
      color: #222;
    }

    header {
      background: #198754;
      color: white;
      padding: 25px;
      text-align: center;
    }

    nav {
      background: #146c43;
      padding: 12px;
      text-align: center;
    }

    nav a {
      color: white;
      text-decoration: none;
      margin: 0 20px;
      font-size: 17px;
      font-weight: bold;
    }

    section {
      padding: 30px 20px;
      max-width: 1000px;
      margin: auto;
    }

    h2 {
      color: #146c43;
    }

    input, button {
      padding: 12px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    button {
      background: #198754;
      color: white;
      cursor: pointer;
      border: none;
      padding: 12px 20px;
    }

    .cards-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 25px;
    }

    .card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    .card h3 {
      margin: 0 0 10px;
      font-size: 20px;
    }

    .links-list div, .links-list a {
      margin: 6px 0;
      font-size: 15px;
      display: block;
    }

    .links-list a {
      color: #0a56c2;
      font-weight: bold;
      text-decoration: none;
    }

    .links-list a:hover {
      text-decoration: underline;
    }

    .loading {
      text-align: center;
      font-size: 18px;
      margin-top: 40px;
    }

    iframe.googform {
      width: 100%;
      height: 900px;
      border: none;
      margin-top: 40px;
    }
  </style>
</head>

<body>
  <header>
    <h1>üéâ Amigo Secreto da Fam√≠lia üéÅ</h1>
  </header>

  <nav>
    <a href="#sorteio">Consultar Amigo</a>
    <a href="#presentes">Sugest√µes</a>
  </nav>


  <!-- ============================= -->
  <!-- TOKENS ‚Üí CONSULTAR RESULTADO -->
  <!-- ============================= -->

  <section id="sorteio">
    <h2>üîê Consulte seu Amigo Secreto</h2>
    <p>Digite o token recebido por e-mail para saber quem voc√™ tirou:</p>

    <input id="tokenInput" type="text" placeholder="Digite seu token" />
    <button onclick="checkToken()">Consultar</button>

    <h3 id="result" style="margin-top:25px;"></h3>
  </section>


  <script>
    const resultados = {
      "A92T":"Marcos Paulo",
      "L3PA":"Cl√°udia",
      "BR25":"Nilza",
      "BB12":"L√∫cia",
      "CM88":"Barbara",
      "OS47":"Clausi",
      "MP90":"Paula",
      "FD22":"Pedro",
      "CL55":"Tarsys",
      "PD61":"Clarissa",
      "NZ73":"C√°ssia",
      "ML14":"F√°bio",
      "CS09":"Claudete",
      "FN31":"Os√©ias",
      "CA82":"Marcos Luiz",
      "FB37":"Bruna",
      "LC44":"Fernand√£o",
      "CT66":"Fernandinho",
      "CR51":"C√©lia Maria"
    };

    function checkToken() {
      const token = document.getElementById("tokenInput").value.trim().toUpperCase();

      if (resultados[token]) {
        document.getElementById("result").innerHTML =
          `üéÅ Seu amigo secreto √©: <strong>${resultados[token]}</strong>`;
      } else {
        document.getElementById("result").innerHTML =
          "‚ùå Token inv√°lido. Tente novamente.";
      }
    }
  </script>


  <!-- ============================= -->
  <!-- SUGEST√ïES EM CARDS ‚Üí PLANILHA -->
  <!-- ============================= -->

  <section id="presentes">
    <h2>üéÅ Sugest√µes enviadas pela fam√≠lia</h2>

    <a href="https://forms.gle/66DaEeY8cY3Pyc5D8" target="_blank"
       style="display:inline-block;margin:15px 0;padding:12px 20px;background:#198754;color:white;text-decoration:none;border-radius:6px;">
       ‚ûï Enviar nova sugest√£o
    </a>

    <div id="loading" class="loading">Carregando sugest√µes‚Ä¶</div>
    <div id="cards" class="cards-container"></div>

    <iframe class="googform"
      src="https://docs.google.com/forms/d/e/1FAIpQLScW64TQ3P0iP_3RUJxE_2j-6VyUbpkhPdaSfKMQmGe6Jo1RXA/viewform?embedded=true"></iframe>
  </section>


  <script>
    async function fetchSheet() {
      const url = "https://opensheet.elk.sh/1HZQljN2g5gNguZhnqnBU3hJj_VIfvcHrLjIi0atAF0E/Respostas";

      try {
        const response = await fetch(url);
        const data = await response.json();
        buildCards(data);
      } catch (error) {
        document.getElementById("loading").innerText = "Erro ao carregar a planilha.";
      }
    }

    function buildCards(data) {
      const cards = document.getElementById("cards");
      const loading = document.getElementById("loading");
      loading.style.display = "none";

      if (!data || data.length === 0) {
        cards.innerHTML = "<p>Nenhuma sugest√£o enviada ainda.</p>";
        return;
      }

      data.forEach(entry => {
        const nome = entry["Nome de quem est√° sugerindo"] || "Participante";
        const sug1 = entry["Sugest√£o 01"];
        const sug2 = entry["Sugest√£o 02"];
        const sug3 = entry["Sugest√£o 03"];

        const list = [sug1, sug2, sug3]
          .filter(s => s && s.trim())
          .map(s => {
            if (s.startsWith("http")) {
              return `<a href="${s}" target="_blank">${s}</a>`;
            }
            return `<div>${s}</div>`;
          })
          .join("");

        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <h3>${nome}</h3>
          <div class="links-list">${list}</div>
        `;

        cards.appendChild(card);
      });
    }

    fetchSheet();
  </script>

</body>
</html>