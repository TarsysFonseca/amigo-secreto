<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Amigo Secreto da FamÃ­lia</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0; padding: 0;
    background: #fafafa;
    color: #222;
  }

  header {
    background: #198754;
    padding: 20px;
    color: #fff;
    text-align: center;
  }

  nav {
    background: #146c43;
    padding: 10px;
    text-align: center;
  }

  nav a {
    color: white;
    margin: 0 15px;
    text-decoration: none;
    font-weight: bold;
  }

  section {
    padding: 30px 20px;
    max-width: 900px;
    margin: auto;
  }

  input, button {
    padding: 10px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 15px;
  }

  button {
    background: #198754;
    color: white;
    border: none;
    cursor: pointer;
  }

  table { width: 100%; border-collapse: collapse; margin-top: 15px; }
  th, td { padding: 10px; border-bottom: 1px solid #ddd; }
  th { background: #f3f3f3; }

  tr:hover { background: #f9f9f9; }

  .hidden { display: none; }
</style>
</head>

<body>

<header>
  <h1>ğŸ‰ Amigo Secreto da FamÃ­lia ğŸ</h1>
</header>

<nav>
  <a href="#sorteio">Resultado</a>
  <a href="#presentes">SugestÃµes de Presentes</a>
</nav>


<!-- =======================
     SEÃ‡ÃƒO 1 â€” RESULTADO
======================== -->

<section id="sorteio">
  <h2>ğŸ” Consulte seu amigo secreto</h2>
  <p>Digite seu token para ver quem vocÃª tirou:</p>

  <input id="tokenInput" type="text" placeholder="Digite seu token">
  <button onclick="checkToken()">Consultar</button>

  <h3 id="result" style="margin-top:20px;"></h3>
</section>


<script>
const resultados = {
 "A92T":"Marcos Paulo",
 "L3PA":"ClÃ¡udia",
 "BR25":"Nilza",
 "BB12":"LÃºcia",
 "CM88":"Barbara",
 "OS47":"Clausi",
 "MP90":"Paula",
 "FD22":"Pedro",
 "CL55":"Tarsys",
 "PD61":"Clarissa",
 "NZ73":"CÃ¡ssia",
 "ML14":"FÃ¡bio",
 "CS09":"Claudete",
 "FN31":"OsÃ©ias",
 "CA82":"Marcos Luiz",
 "FB37":"Bruna",
 "LC44":"FernandÃ£o",
 "CT66":"Fernandinho",
 "CR51":"CÃ©lia Maria"
};

function checkToken() {
  const token = document.getElementById("tokenInput").value.trim().toUpperCase();

  if (resultados[token]) {
    document.getElementById("result").innerHTML =
      `ğŸ Seu amigo secreto Ã©: <strong>${resultados[token]}</strong>`;
  } else {
    document.getElementById("result").innerHTML =
      "âŒ Token invÃ¡lido. Verifique e tente novamente.";
  }
}
</script>



<!-- =======================
     SEÃ‡ÃƒO 2 â€” SUGESTÃ•ES
======================== -->

<section id="presentes">
  <h2>ğŸ SugestÃµes de Presentes</h2>
  <p>Veja o que jÃ¡ foi enviado pela famÃ­lia. VocÃª tambÃ©m pode enviar uma sugestÃ£o:</p>

  <a href="https://forms.gle/66DaEeY8cY3Pyc5D8"
     target="_blank"
     style="display:inline-block;margin:10px 0;padding:12px 20px;background:#198754;color:white;text-decoration:none;border-radius:6px;">
     â• Enviar nova sugestÃ£o
  </a>

  <h3 style="margin-top:30px;">ğŸ” Buscar nome</h3>
  <input id="search" type="text" placeholder="Filtrar por nome...">

  <div id="count" style="margin:10px 0;color:#555;"></div>
  <div id="lista-presentes">Carregando sugestÃµesâ€¦</div>
</section>



<!-- SCRIPT DA PLANILHA -->

<script>
async function loadSuggestions(){
  const sheetId = "1HZQljN2g5gNguZhnqnBU3hJj_VIfvcHrLjIi0atAF0E";
  const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json`;

  const res = await fetch(url);
  const text = await res.text();
  const json = JSON.parse(text.substring(47, text.length - 2));

  const rows = json.table.rows;
  const cols = json.table.cols.map(c => c.label);

  window.dataRows = rows.map(r => r.c.map(c => c?.v ?? ""));

  renderTable(window.dataRows, cols);
}

function renderTable(data, cols){
  let html = "<table><tr>";
  cols.forEach(c => html += `<th>${c}</th>`);
  html += "</tr>";

  data.forEach(row => {
    html += "<tr>";
    row.forEach(cell => html += `<td>${cell}</td>`);
    html += "</tr>";
  });

  html += "</table>";

  document.getElementById("lista-presentes").innerHTML = html;
  document.getElementById("count").innerText =
    `${data.length} sugestÃ£o(Ãµes) encontrada(s)`;
}

document.getElementById("search").addEventListener("input", e => {
  const q = e.target.value.toLowerCase();
  const filtered = window.dataRows.filter(r =>
    r.some(cell => cell.toLowerCase().includes(q))
  );

  renderTable(filtered, ["Nome", "SugestÃ£o"]);
});

loadSuggestions();
</script>

</body>
</html>